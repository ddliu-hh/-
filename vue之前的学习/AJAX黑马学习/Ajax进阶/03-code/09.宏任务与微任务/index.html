<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>微任务与宏任务</title>
</head>
<!-- 
  ES6之后引入了Promise 对象，让JS引擎也可以发起异步任务
  异步任务分为:
√宏任务:由浏览器环境执行的异步代码
√微任务:由JS引擎环境执行的异步代码

任务（代码)             执行所在环境
JS脚本执行事件( script)    浏览器
setTimeout/setInterval    浏览器
AJAX请求完成事件           浏览器
用户交互事件等             浏览器


任务（代码)           执行所在环境
Promise对象.then()      JS引擎
Promise本身是同步的，而then和catch回调函数是异步的


 -->

<body>
  <script>
    /**
     * 目标：阅读并回答打印的执行顺序1 5 4 3 2
     * 微任务队列的优先级比宏任务队列高，所以3会先输出
    */
    console.log(1)
    setTimeout(() => {
      console.log(2)
    }, 0)
    // 注意，Promise本身是同步的，所以一开始它就会被放到调用栈执行，而不用等待,5会输出
    const p = new Promise((resolve, reject) => {
      console.log(5)
      resolve(3)
    })
    p.then(res => {
      console.log(res)
    })
    console.log(4)
  </script>
</body>

</html>